knitr::opts_chunk$set(echo = FALSE,
message = FALSE,
warning = FALSE)
library(scoringutils)
library(purrr)
library(dplyr)
library(tidyr)
library(ggplot2)
library(patchwork)
library(stringr)
library(here)
library(data.table)
library(kableExtra)
# helper functions
# ------------------------------------------------------------------------------
make_table <- function(x, caption = "") {
x %>%
rename_all(gsub, pattern = "_", replacement = " ") %>%
rename_all(str_to_sentence) %>%
mutate_if(is.numeric, round, 2) %>%
kable(caption = caption) %>%
kable_styling()
}
# format plot scales
scale_fn <- function(x) {
ifelse(x >= 1000000,
paste0(x / 1000000, "m"),
ifelse(x >= 5000,
paste0(x / 1000, "k"),
x))
}
scores <- fread(here("output", "data", "all-scores-european-hub.csv"))
scores |>
ggplot(aes(x = interval_score)) +
geom_density() +
facet_wrap(~ target_type + scale, scale = "free") +
scale_x_continuous(labels = scale_fn)
scores |>
filter(scale == "log") |>
lm(formula = interval_score ~ location + target)
scores |>
filter(scale == "log") |>
lm(formula = interval_score ~ location + target_type)
scores |>
filter(scale == "log") |>
lm(formula = interval_score ~ 1 + location + target_type)
reg <- scores |>
filter(scale == "log") |>
lm(formula = interval_score ~ 1 + location + target_type)
residuals(reg)
residuals(reg) |>
plot()
residuals(reg) |>
plot()
install.packages("performance")
library(performance)
check_model(reg)
install.packages("see")
check_model(reg)
